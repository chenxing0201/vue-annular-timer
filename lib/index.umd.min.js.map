{"version":3,"file":"index.umd.min.js","mappings":"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","sources":["webpack://index/webpack/universalModuleDefinition","webpack://index/./node_modules/vue-loader/dist/exportHelper.js","webpack://index/external umd {\"commonjs\":\"vue\",\"commonjs2\":\"vue\",\"root\":\"Vue\"}","webpack://index/webpack/bootstrap","webpack://index/webpack/runtime/define property getters","webpack://index/webpack/runtime/hasOwnProperty shorthand","webpack://index/webpack/runtime/make namespace object","webpack://index/webpack/runtime/publicPath","webpack://index/./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js","webpack://index/./packages/AnnularTimer/src/annular-timer.vue?bb5c","webpack://index/./packages/AnnularTimer/src/annular-timer.vue?7c68","webpack://index/./packages/AnnularTimer/src/annular-timer.vue","webpack://index/./packages/AnnularTimer/index.ts","webpack://index/./packages/index.ts","webpack://index/./node_modules/@vue/cli-service/lib/commands/build/entry-lib.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vue\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"index\"] = factory(require(\"vue\"));\n\telse\n\t\troot[\"index\"] = factory(root[\"Vue\"]);\n})((typeof self !== 'undefined' ? self : this), function(__WEBPACK_EXTERNAL_MODULE__203__) {\nreturn ","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__203__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"\";","/* eslint-disable no-var */\n// This file is imported into lib/wc client bundles.\n\nif (typeof window !== 'undefined') {\n  var currentScript = window.document.currentScript\n  if (process.env.NEED_CURRENTSCRIPT_POLYFILL) {\n    var getCurrentScript = require('@soda/get-current-script')\n    currentScript = getCurrentScript()\n\n    // for backward compatibility, because previously we directly included the polyfill\n    if (!('currentScript' in document)) {\n      Object.defineProperty(document, 'currentScript', { get: getCurrentScript })\n    }\n  }\n\n  var src = currentScript && currentScript.src.match(/(.+\\/)[^/]+\\.js(\\?.*)?$/)\n  if (src) {\n    __webpack_public_path__ = src[1] // eslint-disable-line\n  }\n}\n\n// Indicate to webpack that this file can be concatenated\nexport default null\n","import { createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-11a03622\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"wrapper\" }\nconst _hoisted_2 = {\n  class: \"svg\",\n  viewBox: \"0 0 100 100\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}\nconst _hoisted_3 = { class: \"circle\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"circle\", {\n  class: \"path-elapsed\",\n  cx: \"50\",\n  cy: \"50\",\n  r: \"45\"\n}, null, -1))\nconst _hoisted_5 = [\"stroke-dasharray\"]\nconst _hoisted_6 = { class: \"circle-timer\" }\nconst _hoisted_7 = { class: \"label\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_openBlock(), _createElementBlock(\"svg\", _hoisted_2, [\n      _createElementVNode(\"g\", _hoisted_3, [\n        _hoisted_4,\n        _createElementVNode(\"path\", {\n          \"stroke-dasharray\": _ctx.strokeDashArray,\n          class: \"path-remaining\",\n          style: _normalizeStyle({ color: _ctx.pathColor }),\n          d: \"\\n            M 50, 50\\n            m -45, 0\\n            a 45,45 0 1,0 90,0\\n            a 45,45 0 1,0 -90,0\\n          \"\n        }, null, 12, _hoisted_5)\n      ])\n    ])),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _createElementVNode(\"span\", _hoisted_7, _toDisplayString(_ctx.time), 1)\n    ])\n  ]))\n}","\nimport { defineComponent, PropType, ref } from \"vue\"\nconst FULL_DASH_ARRAY = 283\nconst DEFAULT_COLOR = \"#FFE2AA\"\ninterface Threshold {\n  color: string\n  threshold: number\n}\nconst __default__ = defineComponent({\n  name: \"annular-timer\",\n  props: {\n    defaultColor: {\n      type: String,\n      default: DEFAULT_COLOR\n    },\n    textSize: {\n      type: String,\n      default: \"16px\"\n    },\n    endTime: {\n      type: Number,\n      default: 0\n    }, // 结束时间，单位s\n    startTime: Number, // 开始时间，单位s\n    step: {\n      type: Number,\n      default: -1\n    }, // 间隔时间，单位s，倒计时为负数，正计时为正数\n    onFinished: Function, // 计时结束事件\n    thresholds: {\n      type: Object as PropType<Threshold>,\n      default: []\n    } // 阶段阈值，以及颜色变化。\n  },\n\n  data() {\n    return {\n      time: this.startTime,\n      timer: -1,\n      timeLimit: Math.abs(this.startTime! - this.endTime),\n      currentTextColor: ref(this.defaultColor),\n      currentTextSize: ref(this.textSize),\n      currentRadius: ref(this.radius)\n    }\n  },\n\n  computed: {\n    // 路径颜色\n    pathColor() {\n      let result = this.defaultColor\n      if (Array.isArray(this.thresholds)) {\n        this.thresholds\n          .sort((a, b) => a.threshold - b.threshold)\n          .some(item => {\n            if (this.time! <= this.timeLimit * item.threshold) {\n              // 根据当前时间获取距离最近的阈值的颜色\n              result = item.color\n              this.currentTextColor = item.color\n              return true\n            }\n            return false\n          })\n      }\n      return result\n    },\n\n    // stroke虚线数组\n    strokeDashArray() {\n      // 圆滑过渡\n      const rawTimeFraction = this.time! / this.timeLimit\n      const timeFraction = rawTimeFraction - (1 / this.timeLimit) * (1 - rawTimeFraction)\n      return `${(timeFraction * FULL_DASH_ARRAY).toFixed(0)} ${FULL_DASH_ARRAY}`\n    }\n  },\n\n  mounted() {\n    this.timer = setInterval(() => {\n      // step>0正计时 和 step<0倒计时\n      if ((this.step < 0 && this.time! <= this.endTime) || (this.step > 0 && this.time! >= this.endTime)) {\n        this.onFinished?.()\n        clearInterval(this.timer)\n      } else {\n        const cur = this.time! + this.step\n        this.time = cur <= 0 ? 0 : cur\n      }\n    }, Math.abs(this.step) * 1000)\n  },\n\n  beforeDestroye() {\n    clearInterval(this.timer)\n  }\n})\n\nimport { useCssVars as _useCssVars } from 'vue'\nconst __injectCSSVars__ = () => {\n_useCssVars(_ctx => ({\n  \"3cf155ff\": (_ctx.currentTextSize),\n  \"605a7925\": (_ctx.currentTextColor)\n}))}\nconst __setup__ = __default__.setup\n__default__.setup = __setup__\n  ? (props, ctx) => { __injectCSSVars__();return __setup__(props, ctx) }\n  : __injectCSSVars__\n\nexport default __default__","import { render } from \"./annular-timer.vue?vue&type=template&id=11a03622&scoped=true&ts=true\"\nimport script from \"./annular-timer.vue?vue&type=script&lang=ts\"\nexport * from \"./annular-timer.vue?vue&type=script&lang=ts\"\n\nimport \"./annular-timer.vue?vue&type=style&index=0&id=11a03622&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/xingxing/Documents/vue/vue-annular-timer/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-11a03622\"]])\n\nexport default __exports__","import { App } from 'vue'\nimport AnnularTimer from './src/annular-timer.vue'\n \n// 定义 install 方法， App 作为参数\nAnnularTimer.install = (app: App): void => {\n    app.component(AnnularTimer.name, AnnularTimer)\n}\n \nexport default AnnularTimer","import { App } from 'vue'\nimport AnnularTimer from './AnnularTimer'\n\n// 所有组件列表\nconst components = [AnnularTimer ]\n\n// 定义 install 方法， App 作为参数\nconst install = (app: App): void => {\n    // 遍历注册所有组件\n    components.map((component) => app.component(component.name, component))\n}\n\nexport {\n    AnnularTimer\n}\n\nexport default {\n    install\n}\n","import './setPublicPath'\nimport mod from '~entry'\nexport default mod\nexport * from '~entry'\n"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE__203__","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","p","window","currentScript","document","src","match","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","viewBox","xmlns","_hoisted_3","_hoisted_4","_createElementVNode","cx","cy","_hoisted_5","_hoisted_6","_hoisted_7","render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createElementBlock","strokeDashArray","style","_normalizeStyle","color","pathColor","_toDisplayString","time","FULL_DASH_ARRAY","DEFAULT_COLOR","__default__","defineComponent","name","defaultColor","type","String","default","textSize","endTime","Number","startTime","step","onFinished","Function","thresholds","data","timer","timeLimit","Math","abs","currentTextColor","ref","currentTextSize","currentRadius","radius","computed","result","Array","isArray","sort","a","b","threshold","some","item","rawTimeFraction","timeFraction","toFixed","mounted","setInterval","clearInterval","cur","beforeDestroye","__injectCSSVars__","_useCssVars","__setup__","setup","ctx","__exports__","AnnularTimer","app","component","components","install","map"],"sourceRoot":""}