import{defineComponent as t,ref as e,useCssVars as r,openBlock as s,createElementBlock as i,createElementVNode as a,normalizeStyle as n,toDisplayString as l,pushScopeId as o,popScopeId as h}from"vue";const m=t({name:"annular-timer",props:{defaultColor:{type:String,default:"#FFE2AA"},textSize:{type:String,default:"16px"},endTime:{type:Number,default:0},startTime:Number,step:{type:Number,default:-1},onFinished:Function,thresholds:{type:Object,default:[]}},data(){return{time:this.startTime,timer:-1,timeLimit:Math.abs(this.startTime-this.endTime),currentTextColor:e(this.defaultColor),currentTextSize:e(this.textSize),currentRadius:e(this.radius)}},computed:{pathColor(){let t=this.defaultColor;return Array.isArray(this.thresholds)&&this.thresholds.sort(((t,e)=>t.threshold-e.threshold)).some((e=>this.time<=this.timeLimit*e.threshold&&(t=e.color,this.currentTextColor=e.color,!0))),t},strokeDashArray(){const t=this.time/this.timeLimit;return`${(283*(t-1/this.timeLimit*(1-t))).toFixed(0)} 283`}},mounted(){this.timer=setInterval((()=>{if(this.step<0&&this.time<=this.endTime||this.step>0&&this.time>=this.endTime)this.onFinished?.(),clearInterval(this.timer);else{const t=this.time+this.step;this.time=t<=0?0:t}}),1e3*Math.abs(this.step))},beforeDestroye(){clearInterval(this.timer)}}),c=()=>{r((t=>({"40af8632-currentTextSize":t.currentTextSize,"40af8632-currentTextColor":t.currentTextColor})))},u=m.setup;m.setup=u?(t,e)=>(c(),u(t,e)):c;const d={class:"wrapper"},p={class:"svg",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},f={class:"circle"},T=(t=>(o("data-v-40af8632"),t=t(),h(),t))((()=>a("circle",{class:"path-elapsed",cx:"50",cy:"50",r:"45"},null,-1))),x=["stroke-dasharray"],v={class:"circle-timer"},y={class:"label"};m.render=function(t,e,r,o,h,m){return s(),i("div",d,[(s(),i("svg",p,[a("g",f,[T,a("path",{"stroke-dasharray":t.strokeDashArray,class:"path-remaining",style:n({color:t.pathColor}),d:"\n            M 50, 50\n            m -45, 0\n            a 45,45 0 1,0 90,0\n            a 45,45 0 1,0 -90,0\n          "},null,12,x)])])),a("div",v,[a("span",y,l(t.time),1)])])},m.__scopeId="data-v-40af8632",m.__file="packages/AnnularTimer/src/annular-timer.vue",m.install=t=>{t.component(m.name,m)};const g=[m];var C={install:t=>{g.map((e=>t.component(e.name,e)))}};export{m as AnnularTimer,C as default};
