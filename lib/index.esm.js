import{defineComponent as t,ref as e,openBlock as r,createElementBlock as i,createElementVNode as s,normalizeStyle as a,toDisplayString as l,pushScopeId as n,popScopeId as o}from"vue";var h=t({name:"annular-timer",props:{defaultColor:{type:String,default:"#FFE2AA"},textSize:{type:String,default:"16px"},endTime:{type:Number,default:0},startTime:Number,step:{type:Number,default:-1},onFinished:Function,thresholds:{type:Object,default:[]}},data(){return{time:this.startTime,timer:-1,timeLimit:Math.abs(this.startTime-this.endTime),currentTextColor:e(this.defaultColor),currentTextSize:e(this.defaultColor),currentRadius:e(this.radius)}},computed:{pathColor(){let t=this.defaultColor;return Array.isArray(this.thresholds)&&this.thresholds.sort(((t,e)=>t.threshold-e.threshold)).some((e=>this.time<=this.timeLimit*e.threshold&&(t=e.color,this.currentTextColor=e.color,!0))),t},strokeDashArray(){const t=this.time/this.timeLimit;return`${(283*(t-1/this.timeLimit*(1-t))).toFixed(0)} 283`}},mounted(){this.timer=setInterval((()=>{if(this.step<0&&this.time<=this.endTime||this.step>0&&this.time>=this.endTime)this.onFinished?.(),clearInterval(this.timer);else{const t=this.time+this.step;this.time=t<=0?0:t}}),1e3*Math.abs(this.step))},beforeDestroye(){clearInterval(this.timer)}});const m={class:"circle-timer__wrapper"},c={class:"circle-timer__svg",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},d={class:"circle-timer__circle"},u=(t=>(n("data-v-40af8632"),t=t(),o(),t))((()=>s("circle",{class:"circle-timer__path-elapsed",cx:"50",cy:"50",r:"45"},null,-1))),p=["stroke-dasharray"],f={class:"circle-timer"},v={class:"label"};h.render=function(t,e,n,o,h,y){return r(),i("div",m,[(r(),i("svg",c,[s("g",d,[u,s("path",{"stroke-dasharray":t.strokeDashArray,class:"circle-timer__path-remaining",style:a({color:t.pathColor}),d:"\n            M 50, 50\n            m -45, 0\n            a 45,45 0 1,0 90,0\n            a 45,45 0 1,0 -90,0\n          "},null,12,p)])])),s("div",f,[s("span",v,l(t.time),1)])])},h.__scopeId="data-v-40af8632",h.__file="packages/AnnularTimer/src/annular-timer.vue",h.install=t=>{t.component(h.name,h)};const y=[h];var _={install:t=>{y.map((e=>t.component(e.name,e)))}};export{h as AnnularTimer,_ as default};
